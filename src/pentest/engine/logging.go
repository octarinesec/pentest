package engine

import (
	"fmt"
	"github.com/juju/loggo"
	"github.com/juju/loggo/loggocolor"
	"os"
	"time"
)

var context = loggo.NewContext(loggo.TRACE)

func GetLogger(name string) loggo.Logger {
	return context.GetLogger(name)
}

var Logger = GetLogger("pentest")

func init() {
	defaultWriter := loggo.NewMinimumLevelWriter(loggocolor.NewWriter(os.Stderr), loggo.INFO)
	context.AddWriter("default", defaultWriter)

	file, err := os.Create(time.Now().Format("2006-01-02-15-04-05.log"))
	if err != nil {
		panic(fmt.Sprintf("Couldn't create log file: %v", err))
	}

	context.AddWriter("FileWriter", loggo.NewSimpleWriter(file, nil))
}
